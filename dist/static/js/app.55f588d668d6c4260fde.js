webpackJsonp([1],[,function(e,t,s){"use strict";var n=s(70),i=s.n(n);i.a.init({appId:"lUJblxWpbwKUQBE6DXJMi50B-gzGzoHsz",appKey:"jlv4SOziGRb6W2Do5JBMHBej"}),t.a=i.a},,function(e,t,s){"use strict";var n=s(1);t.a=function(){var e=n.a.User.current()||{attributes:{}},t=e.id,s=e.attributes.username;return{id:t||"",username:s||""}}},,,,,,function(e,t,s){"use strict";var n={202:"用户名已被占用",210:"用户名和密码不匹配",211:"找不到该用户",217:"无效的用户名",unkonwn:"请求失败 请稍后再试"};t.a=function(e){var t=e.code;return n[t]||n.unkonwn}},,,,,,function(e,t,s){"use strict";var n=s(2),i=s(87),a=s(73),r=s.n(a);n.a.use(i.a),t.a=new i.a({routes:[{path:"/",name:"Resume",component:r.a}]})},function(e,t,s){"use strict";var n=s(29),i=s.n(n),a=s(28),r=s.n(a),o=s(89),u=s(2),c=s(1),l=s(3);u.a.use(o.a),t.a=new o.a.Store({state:{selected:"profile",user:{id:"",username:""},resumeConfig:[{field:"profile",keys:["name","city","title","birthday"]},{field:"workHistory",type:"active",keys:["company","details"]},{field:"education",type:"active",keys:["school","details"]},{field:"projects",type:"active",keys:["name","details"]},{field:"awards",type:"active",keys:["name","details"]},{field:"contacts",type:"active",keys:["contact"]}],resume:{id:""}},mutations:{initState:function(e){e.resumeConfig.map(function(t){"active"===t.type?u.a.set(e.resume,t.field,[]):(u.a.set(e.resume,t.field,{}),t.keys.map(function(s){u.a.set(e.resume[t.field],s,"")}))})},switchTab:function(e,t){e.selected=t},updateResume:function(e,t){var s=t.field,n=t.subfield,i=t.value;s[n]=i,localStorage.setItem("resume",r()(e.resume))},setUser:function(e,t){i()(e.user,t)},removeUser:function(e){e.user.id=""},addResumeSubfield:function(e,t){var s=t.field,n={};console.log(e.resume[s]),e.resume[s].push(n),e.resumeConfig.filter(function(e){return e.field===s})[0].keys.map(function(e){u.a.set(n,e,"")})},removeResumeSubfield:function(e,t){var s=t.field,n=t.index;e.resume[s].splice(n,1)},setResumeId:function(e,t){var s=t.id;e.resume.id=s},setResume:function(e,t){e.resumeConfig.map(function(s){var n=s.field;u.a.set(e.resume,n,t[n])})}},actions:{saveResume:function(e,t){var n=e.state,i=e.commit,a=c.a.Object.extend("Resume"),r=new a;n.resume.id&&(r.id=n.resume.id),r.set("profile",n.resume.profile),r.set("workHistory",n.resume.workHistory),r.set("education",n.resume.education),r.set("projects",n.resume.projects),r.set("awards",n.resume.awards),r.set("contacts",n.resume.contacts),r.set("owner_id",s.i(l.a)().id);var o=new c.a.ACL;o.setPublicReadAccess(!0),o.setWriteAccess(c.a.User.current(),!0),r.setACL(o),r.save().then(function(e){n.resume.id||i("setResumeId",{id:e.id})}).catch(function(e){console.log(e)})},fetchResume:function(e,t){var n=e.commit,i=new c.a.Query("Resume");i.equalTo("owner_id",s.i(l.a)().id),i.first().then(function(e){if(e){var t=e.attributes;t.id=e.id,n("setResume",t)}})}}})},function(e,t,s){s(67);var n=s(0)(s(18),s(85),null,null);e.exports=n.exports},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(60),i=(s.n(n),s(1),s(3));t.default={name:"app",created:function(){var e=this;this.$store.commit("initState");var t=s.i(i.a)();this.$store.commit("setUser",t),t.id?this.$store.dispatch("fetchResume").then(function(){e.restoreResumeFromLocalStorage()}):this.restoreResumeFromLocalStorage()},methods:{restoreResumeFromLocalStorage:function(){var e=localStorage.getItem("resume");e&&this.$store.commit("setResume",JSON.parse(e))}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Dialog",props:["title","visible"],methods:{close:function(){this.$emit("close")}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(78),i=s.n(n),a=s(74),r=s.n(a),o=s(75),u=s.n(o);t.default={name:"Resume",components:{Topbar:i.a,ResumeEditor:r.a,ResumePreview:u.a},created:function(){}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(s(2),s(26));t.default={name:"ResumeEditor",computed:{selected:{get:function(){return this.$store.state.selected},set:function(e){return this.$store.commit("switchTab",e)}},resume:function(){return this.$store.state.resume},resumeConfig:function(){return this.$store.state.resumeConfig}},methods:{changeResumeField:function(e,t,s){this.$store.commit("updateResume",{field:e,subfield:t,value:s})},addResumeSubfield:function(e){this.$store.commit("addResumeSubfield",{field:e})},removeResumeSubfield:function(e,t){this.$store.commit("removeResumeSubfield",{field:e,index:t})},translateToZh:function(e){return s.i(n.a)(e)}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"ResumePreview",computed:{resume:function(){return this.$store.state.resume}},methods:{save:function(){this.$store.dispatch("saveResume")}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(1),i=s(9),a=s(3);t.default={name:"SignInForm",data:function(){return{formData:{username:"",password:""},errorMessage:""}},methods:{signIn:function(){var e=this,t=this.formData,r=t.username,o=t.password;n.a.User.logIn(r,o).then(function(){e.$emit("success",s.i(a.a)())},function(t){e.errorMessage=s.i(i.a)(t)})}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(1),i=s(9),a=s(3);t.default={name:"SignUpForm",data:function(){return{formData:{username:"",password:""},errorMessage:""}},methods:{signUp:function(){var e=this,t=this.formData,r=t.username,o=t.password,u=new n.a.User;u.setUsername(r),u.setPassword(o),u.signUp().then(function(){e.$emit("success",s.i(a.a)())},function(t){e.errorMessage=s.i(i.a)(t)})}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(72),i=s.n(n),a=s(77),r=s.n(a),o=s(76),u=s.n(o),c=s(1);t.default={name:"Topbar",created:function(){},data:function(){return{signUpDialogVisible:!1,signInDialogVisible:!1}},computed:{user:function(){return this.$store.state.user},logined:function(){return this.user.id}},components:{NewDialog:i.a,SignUpForm:r.a,SignInForm:u.a},methods:{signOut:function(){c.a.User.logOut(),this.$store.commit("removeUser")},signIn:function(e){this.signUpDialogVisible=!1,this.signInDialogVisible=!1,this.$store.commit("setUser",e)}}}},function(e,t,s){"use strict";var n={profile:"个人简介",workHistory:"工作经历",education:"教育经历",projects:"项目经历",awards:"获得奖项",contacts:"联系方式",city:"城市",title:"头衔",birthday:"生日",company:"公司",details:"详情",school:"院校",name:"名字",contact:"联系方式"};t.a=function(e){return n[e]||"undefined"}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(2),i=s(17),a=s.n(i),r=s(15),o=s(16);n.a.config.productionTip=!1,new n.a({el:"#app",router:r.a,store:o.a,template:"<App/>",components:{App:a.a}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,,,function(e,t,s){s(61);var n=s(0)(s(19),s(79),"data-v-0971e76c",null);e.exports=n.exports},function(e,t,s){var n=s(0)(s(20),s(86),null,null);e.exports=n.exports},function(e,t,s){s(64);var n=s(0)(s(21),s(82),"data-v-2d8f2aa8",null);e.exports=n.exports},function(e,t,s){s(66);var n=s(0)(s(22),s(84),null,null);e.exports=n.exports},function(e,t,s){s(63);var n=s(0)(s(23),s(81),"data-v-2c61bdd4",null);e.exports=n.exports},function(e,t,s){s(65);var n=s(0)(s(24),s(83),"data-v-6f482d6c",null);e.exports=n.exports},function(e,t,s){s(62);var n=s(0)(s(25),s(80),"data-v-124fbfcc",null);e.exports=n.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"dialogWrapper"},[s("div",{staticClass:"dialog"},[s("header",[e._v("\n      "+e._s(e.title)+"\n      "),e._v(" "),s("span",{staticClass:"close",on:{click:e.close}},[e._v("X")])]),e._v(" "),s("main",[e._t("default")],2)])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"topbar"}},[s("div",{staticClass:"wrapper"},[s("span",{staticClass:"log"},[e._v("Resumer")]),e._v(" "),s("div",{staticClass:"actions"},[e.logined?s("div",[s("span",{staticClass:"welcome"},[e._v("你好，"+e._s(e.user.username))]),e._v(" "),s("a",{staticClass:"button",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.signOut(t)}}},[e._v("登出")])]):s("div",[s("a",{staticClass:"button btn-primary",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.signUpDialogVisible=!0}}},[e._v("注册")]),e._v(" "),s("a",{staticClass:"button",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.signInDialogVisible=!0}}},[e._v("登录")])])])]),e._v(" "),s("NewDialog",{attrs:{title:"注册",visible:e.signUpDialogVisible},on:{close:function(t){e.signUpDialogVisible=!1}}},[s("SignUpForm",{on:{success:function(t){e.signIn(t)}}})],1),e._v(" "),s("NewDialog",{attrs:{title:"登录",visible:e.signInDialogVisible},on:{close:function(t){e.signInDialogVisible=!1}}},[s("SignInForm",{on:{success:function(t){e.signIn(t)}}})],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("form",{on:{submit:function(t){t.preventDefault(),e.signIn(t)}}},[s("div",{staticClass:"row"},[s("label",[e._v("用户名")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.username,expression:"formData.username"}],attrs:{type:"text",required:""},domProps:{value:e.formData.username},on:{input:function(t){t.target.composing||(e.formData.username=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"row"},[s("label",[e._v("密码")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.password,expression:"formData.password"}],attrs:{type:"password",required:""},domProps:{value:e.formData.password},on:{input:function(t){t.target.composing||(e.formData.password=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"submit"},[s("input",{staticClass:"button",attrs:{type:"submit",value:"提交"}}),e._v(" "),s("span",[e._v(e._s(e.errorMessage))])])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"resumeEditor"}},[s("nav",[s("ol",e._l(e.resumeConfig,function(t){return s("li",{class:{active:t.field===e.selected},on:{click:function(s){e.selected=t.field}}},[e._v("\n        "+e._s(e.translateToZh(t.field))+"\n      ")])}))]),e._v(" "),s("ol",{staticClass:"panels"},e._l(e.resumeConfig,function(t){return s("li",{directives:[{name:"show",rawName:"v-show",value:t.field===e.selected,expression:"item.field === selected"}]},["active"===t.type?s("div",[s("h2",[e._v(e._s(e.translateToZh(t.field)))]),e._v(" "),e._l(e.resume[t.field],function(n,i){return s("div",{staticClass:"subitem"},[s("button",{staticClass:"button btn-remove btn-small",on:{click:function(s){e.removeResumeSubfield(t.field,i)}}},[e._v("删除")]),e._v(" "),e._l(n,function(n,a){return s("div",{staticClass:"resumeField"},[s("label",[e._v(" "+e._s(e.translateToZh(a))+" ")]),e._v(" "),s("input",{attrs:{type:"text"},domProps:{value:n},on:{input:function(s){e.changeResumeField(e.resume[t.field][i],a,s.target.value)}}})])}),e._v(" "),s("hr")],2)}),e._v(" "),s("button",{staticClass:"button",on:{click:function(s){e.addResumeSubfield(t.field)}}},[e._v("新增")])],2):e._l(e.resume[t.field],function(n,i){return s("div",{staticClass:"resumeField"},[s("label",[e._v(" "+e._s(e.translateToZh(i))+" ")]),e._v(" "),s("input",{attrs:{type:"text"},domProps:{value:n},on:{input:function(s){e.changeResumeField(e.resume[t.field],i,s.target.value)}}})])})],2)}))])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("form",{on:{submit:function(t){t.preventDefault(),e.signUp(t)}}},[s("div",{staticClass:"row"},[s("label",[e._v("用户名")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.username,expression:"formData.username"}],attrs:{type:"text",required:""},domProps:{value:e.formData.username},on:{input:function(t){t.target.composing||(e.formData.username=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"row"},[s("label",[e._v("密码")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.password,expression:"formData.password"}],attrs:{type:"password",required:""},domProps:{value:e.formData.password},on:{input:function(t){t.target.composing||(e.formData.password=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"submit"},[s("input",{staticClass:"button",attrs:{type:"submit",value:"提交"}}),e._v(" "),s("span",{staticClass:"errorMessage"},[e._v(e._s(e.errorMessage))])])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"resumePreview"}},[s("button",{staticClass:"button",on:{click:e.save}},[e._v(" 保存 ")]),e._v(" "),e.resume.profile&&e.resume.profile.name?s("section",{attrs:{"data-name":"profile"}},[s("h1",[e._v("\n      "+e._s(e.resume.profile.name)+"\n    ")]),e._v(" "),s("h2",[e._v(e._s(e.resume.profile.title))]),e._v(" "),s("p",[s("small",[e._v(e._s(e.resume.profile.city))]),e._v(" "),s("small",[e._v(e._s(e.resume.profile.birthday))])])]):e._e(),e._v(" "),e.resume.workHistory&&e.resume.workHistory.length>0?s("section",{attrs:{"data-name":"workHistory"}},[s("h2",[e._v("工作经历")]),e._v(" "),s("ol",e._l(e.resume.workHistory,function(t){return s("li",[s("h3",[e._v(e._s(t.company))]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:t.details,expression:"item.details"}]},[e._v(" "+e._s(t.details)+" ")])])}))]):e._e(),e._v(" "),e.resume.education&&e.resume.education.length>0?s("section",{attrs:{"data-name":"education"}},[s("h2",[e._v("毕业院校")]),e._v(" "),s("ol",e._l(e.resume.education,function(t){return s("li",[s("h3",[e._v(e._s(t.school))]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.details,expression:"item.details"}]},[e._v(" "+e._s(t.details)+" ")])])}))]):e._e(),e._v(" "),e.resume.projects&&e.resume.projects.length>0?s("section",{attrs:{"data-name":"projects"}},[s("h2",[e._v("项目经历")]),e._v(" "),s("ol",e._l(e.resume.projects,function(t){return s("li",[s("h3",[e._v(e._s(t.name))]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:t.details,expression:"item.details"}]},[e._v(" "+e._s(t.details)+" ")])])}))]):e._e(),e._v(" "),e.resume.awards&&e.resume.awards.length>0?s("section",{attrs:{"data-name":"awards"}},[s("h2",[e._v("获奖情况")]),e._v(" "),s("ol",e._l(e.resume.awards,function(t){return s("li",[s("h3",[e._v(e._s(t.name))]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:t.details,expression:"item.details"}]},[e._v(" "+e._s(t.details)+" ")])])}))]):e._e(),e._v(" "),e.resume.contacts&&e.resume.contacts.length>0?s("section",{attrs:{"data-name":"contacts"}},[s("h2",[e._v("联系方式")]),e._v(" "),s("table",e._l(e.resume.contacts,function(t){return s("tr",[s("td",[e._v(e._s(t.contact))]),e._v(" "),s("td",{directives:[{name:"show",rawName:"v-show",value:t.details,expression:"item.details"}]},[e._v(" "+e._s(t.details)+" ")])])}))]):e._e()])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("router-view")],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"page"},[s("header",[s("Topbar")],1),e._v(" "),s("main",[s("ResumeEditor"),e._v(" "),s("ResumePreview")],1)])])},staticRenderFns:[]}}],[27]);
//# sourceMappingURL=app.55f588d668d6c4260fde.js.map